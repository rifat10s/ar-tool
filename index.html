<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AR TOOL - Islamic Motivational Line</title>
<meta name="description" content="AR TOOL - AI ছবি, QR কোড, ভয়েস, ছবি এডিটিং, ভিডিও থেকে সাবটাইটেলসহ শতাধিক ফ্রি টুলস। ইসলামিক চ্যানেল সাবস্ক্রাইব করুন।" />
<meta name="keywords" content="AI ছবি, QR কোড, ভয়েস, ছবি এডিট, সাবটাইটেল, ফ্রি টুলস, ইসলামিক চ্যানেল" />
<style>
body {background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);color: #eee;min-height: 100vh;margin: 0;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
header {background: #004d40;color: #00e5ff;font-size: 2.2rem;font-weight: 900;padding: 18px 20px 18px 56px;text-align: center;letter-spacing: 3px;position: fixed;width: 100%;top: 0; left: 0;z-index: 1001;box-shadow: 0 3px 10px #0008;}
label[for="drawerToggle"] {position: fixed;top: 18px;left: 20px;font-size: 2.2rem;color: #00e5ff;cursor: pointer;z-index: 1100;user-select: none;}
#drawerToggle { display: none; }
#drawerToggle:checked ~ #drawer { transform: translateX(0); }
#drawer {position: fixed; top: 0; bottom: 0; left: 0;width: 270px;background: #004d40;box-shadow: 3px 0 15px #000a;padding-top: 70px;overflow-y: auto;transform: translateX(-300px);transition: transform 0.3s ease;z-index: 1000;}
#drawer label.close-btn {position: absolute; top: 15px; right: 15px;font-size: 2rem; color: #00e5ff; cursor: pointer;}
#drawer ul { list-style: none; margin:0; padding:0; }
#drawer ul li { border-bottom: 1px solid #00796b; }
#drawer ul li button {width: 100%; padding: 13px 18px; background: transparent; border: none;color: #80deea; font-size: 1.1rem; text-align: left; cursor: pointer;transition: background 0.25s;}
#drawer ul li button:hover { background: #00796b; color: #b2dfdb; }
main {max-width: 960px;margin: 90px auto 40px;padding: 0 12px;}
section {margin-bottom: 40px;background: rgba(0,77,64,0.3);border-radius: 16px;padding: 22px;box-shadow: 0 6px 20px #0008;}
h2 {font-size: 1.4rem;margin-bottom: 15px;color: #00e5ff;border-bottom: 2px solid #00bfa5;padding-bottom: 8px;text-shadow: 0 0 6px #00e5ffaa;}
p { font-size: 1.08rem; color: #b2dfdb; }
img.hero-img {width: 100%; max-width: 500px; border-radius: 18px;box-shadow: 0 8px 30px #000a; margin-bottom: 18px;}
.tool-container { display: none; animation: fadeIn 0.4s ease; }
.tool-container.active { display: block; }
button.action-btn {background: linear-gradient(45deg,#00bfa5,#004d40);color: #fff; border: none; padding: 13px 25px;font-size: 1rem; border-radius: 12px; cursor: pointer;margin-top: 13px; box-shadow: 0 6px 20px #00bfa5aa;transition: background 0.3s, transform 0.22s;}
button.action-btn:hover { background: linear-gradient(45deg,#004d40,#00bfa5); transform: scale(1.06);}
input, select, textarea {width: 100%; padding: 11px 14px; border-radius: 10px; border: none;font-size: 1rem; outline: none; margin-top: 8px;background: rgba(255,255,255,0.1); color: #e0f2f1;transition: box-shadow 0.3s;}
input[type="range"] { width: 90%; margin-top: 12px; }
input::placeholder, textarea::placeholder { color: #80cbc4; }
input:focus, select:focus, textarea:focus { box-shadow: 0 0 8px #00bfa5; }
img.rounded-image {border-radius: 20px;max-width: 100%; height: auto; margin-top: 13px;box-shadow: 0 6px 20px rgba(0,191,165,0.7);transition: border-radius 0.4s;}
a.download-btn {display: inline-block; margin-top: 10px;background: #00bfa5; padding: 9px 18px; border-radius: 11px;font-weight: 700; text-decoration: none; color: #fff;box-shadow: 0 5px 15px #00bfa5aa; transition: background 0.3s;}
a.download-btn:hover { background: #008e76; }
.loader {border: 4px solid #ccc; border-top: 4px solid #00bfa5;border-radius: 50%; width: 28px; height: 28px;animation: spin 1s linear infinite; margin: 18px auto;}
@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
@keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
.ad-banner, .ad-social-bar {background: rgba(0,0,0,0.25); color: #00bfa5; text-align: center;padding: 14px; margin: 25px 0; border-radius: 12px;font-weight: 600; font-size: 1.05rem; letter-spacing: 1px;}
#subscribeModal {position: fixed; top:0; left:0; width:100vw; height:100vh;background:rgba(0,0,0,0.7); z-index:2000; display:none; align-items:center; justify-content:center;}
#subscribeModal .modal-content {background:#fff; color:#222; border-radius:18px; padding:30px 20px; max-width:350px; text-align:center; position:relative;}
#subscribeModal img { width:100%; max-width:220px; border-radius:12px; margin-bottom:18px;}
#subscribeModal button { background:#00bfa5; color:#fff; border:none; border-radius:8px; padding:10px 30px; font-size:1.1rem; margin-top:12px;}
#subscribeModal button:hover { background:#008e76; }
#subscribeModal .close-x { position:absolute; right:10px; top:10px; font-size:1.5rem; cursor:pointer; color:#00bfa5;}
@media (max-width: 700px) {main { margin: 90px 5px 40px; padding: 0 2px;}#drawer { width: 210px; padding-top: 60px;}label[for="drawerToggle"] { font-size: 2rem; left: 11px; top: 13px;}img.hero-img { max-width: 98vw; }}
</style>
</head>
<body>
<header>
  <label for="drawerToggle" aria-label="Open menu">&#9776;</label>
  AR TOOL
</header>
<input type="checkbox" id="drawerToggle" aria-label="Toggle navigation drawer" />
<nav id="drawer" aria-label="Tool navigation drawer">
  <label for="drawerToggle" class="close-btn" aria-label="Close menu">&times;</label>
  <ul id="toolList" role="menu" aria-label="Tool list"></ul>
</nav>
<main>
  <!-- হোম স্ক্রিন -->
  <section id="homeScreen" class="tool-container active" aria-live="polite">
    <img src="https://pplx-res.cloudinary.com/image/upload/v1747016016/user_uploads/68550677/f9b430d8-0209-4537-b6c6-2c053e416161/X0fcAJWgSoOcjzWJamUK5Q.jpg" class="hero-img" alt="Islamic Motivational Line" />
    <h2>ইসলামিক চ্যানেল সাবস্ক্রাইব করুন</h2>
    <p>ইসলাম সম্পর্কে জানুন, সুন্দর বয়ান শুনুন এবং আমাদের প্রিয় ইসলামিক চ্যানেলটি সাবস্ক্রাইব করুন। নিয়মিত আপডেট পেতে থাকুন।</p>
    <a id="subscribeBtn" href="https://youtube.com/@islamicmotivationalline?sub_confirmation=1" target="_blank" rel="noopener" class="download-btn" style="max-width:350px; display:inline-block; margin-top:12px;">সাবস্ক্রাইব করুন</a>
  </section>
  <div class="ad-banner" aria-label="Native banner advertisement">
    <!-- Ad 1 -->
    <script type="text/javascript">
      atOptions = {'key' : 'f2483431b9841c0a784c64fc854bff54','format' : 'iframe','height' : 60,'width' : 468,'params' : {}};
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/f2483431b9841c0a784c64fc854bff54/invoke.js"></script>
    <!-- Ad 2 -->
    <script type='text/javascript' src='//pl26618843.profitableratecpm.com/94/3f/5e/943f5e03599d84af35f7757a88eb292e.js'></script>
  </div>
  <!-- AI Image Generator -->
  <section id="aiImageTool" class="tool-container" aria-live="polite" hidden>
    <h2>AI দিয়ে ছবি তৈরি করুন</h2>
    <label>ছবির বর্ণনা দিন:</label>
    <textarea id="prompt" rows="2" placeholder="ছবির বর্ণনা লিখুন..."></textarea>
    <label>একবারে কয়টি ছবি চান? (১-৫):</label>
    <select id="imgCount">
      <option>1</option><option>2</option><option>3</option><option>4</option><option selected>5</option>
    </select>
    <button class="action-btn" onclick="generateImage()">ছবি তৈরি করুন</button>
    <div id="image-result" style="margin-top:15px; text-align:center;"></div>
    <div id="image-downloads"></div>
  </section>
  <!-- QR Code Generator -->
  <section id="qrCodeTool" class="tool-container" aria-live="polite" hidden>
    <h2>QR কোড তৈরি করুন</h2>
    <label for="qr-type">QR কোডের ধরণ:</label>
    <select id="qr-type">
      <option value="youtube">YouTube</option>
      <option value="facebook">Facebook</option>
      <option value="gmail">Gmail</option>
      <option value="tiktok">TikTok</option>
      <option value="instagram">Instagram</option>
      <option value="whatsapp">WhatsApp</option>
      <option value="twitter">Twitter</option>
      <option value="snapchat">Snapchat</option>
      <option value="pinterest">Pinterest</option>
      <option value="linkedin">LinkedIn</option>
      <option value="telegram">Telegram</option>
      <option value="imo">IMO</option>
      <option value="messenger">Messenger</option>
      <option value="reddit">Reddit</option>
      <option value="skype">Skype</option>
    </select>
    <label for="qr-input">URL বা লিঙ্ক দিন:</label>
    <input type="url" id="qr-input" placeholder="যেমন: https://www.youtube.com/channel/..." />
    <button class="action-btn" onclick="generateQR()">QR কোড তৈরি করুন</button>
    <div id="qr-result" style="margin-top:15px; text-align:center;"></div>
    <div id="qr-downloads"></div>
  </section>
  <!-- Barcode Generator -->
  <section id="barcodeTool" class="tool-container" aria-live="polite" hidden>
    <h2>বারকোড জেনারেটর</h2>
    <label for="barcode-input">বারকোডের জন্য টেক্সট/নাম্বার দিন:</label>
    <input type="text" id="barcode-input" placeholder="যেমন: 123456789012" />
    <button class="action-btn" onclick="generateBarcode()">বারকোড তৈরি করুন</button>
    <div id="barcode-result" style="margin-top:15px; text-align:center;"></div>
    <div id="barcode-downloads"></div>
  </section>
  <!-- ভিডিও কনভার্টার -->
  <section id="videoConverter" class="tool-container" aria-live="polite" hidden>
    <h2>ভিডিও কনভার্টার</h2>
    <label for="video-upload">ভিডিও আপলোড করুন:</label>
    <input type="file" id="video-upload" accept="video/*" />
    <label for="video-format">ফরম্যাট নির্বাচন করুন:</label>
    <select id="video-format">
      <option value="mp4">MP4</option>
      <option value="webm">WebM</option>
      <option value="ogg">OGG</option>
    </select>
    <button class="action-btn" onclick="convertVideo()">কনভার্ট করুন</button>
    <div id="video-result" style="margin-top:15px; text-align:center;"></div>
    <div id="video-downloads"></div>
    <small style="color:#ffeb3b;">* বড় ভিডিও ফাইলের জন্য client-side কনভার্সন স্লো হতে পারে।</small>
  </section>
  <!-- ছবি রিসাইজার -->
  <section id="imageResizer" class="tool-container" aria-live="polite" hidden>
    <h2>ছবি রিসাইজার</h2>
    <label for="resize-upload">ছবি আপলোড করুন:</label>
    <input type="file" id="resize-upload" accept="image/*" />
    <label>নতুন Width (px):</label>
    <input type="number" id="resize-width" min="1" placeholder="Width" />
    <label>নতুন Height (px):</label>
    <input type="number" id="resize-height" min="1" placeholder="Height" />
    <button class="action-btn" onclick="resizeImage()">রিসাইজ করুন</button>
    <div id="resize-result" style="margin-top:15px; text-align:center;"></div>
    <div id="resize-downloads"></div>
  </section>
  <!-- ভয়েস জেনারেটর -->
  <section id="voiceTool" class="tool-container" aria-live="polite" hidden>
    <h2>ভয়েস তৈরি করুন</h2>
    <label for="voice-select">ভয়েস নির্বাচন করুন:</label>
    <select id="voice-select" size="8" style="height:160px;"></select>
    <label for="voice-text">ভয়েসের জন্য টেক্সট লিখুন:</label>
    <textarea id="voice-text" rows="3" placeholder="আপনার টেক্সট লিখুন"></textarea>
    <button class="action-btn" onclick="generateVoice()">ভয়েস তৈরি করুন</button>
    <audio id="voice-audio" controls style="margin-top:15px; width:100%; display:none;"></audio>
    <div id="voice-downloads"></div>
  </section>
  <!-- ভিডিও থেকে সাবটাইটেল -->
  <section id="subtitleTool" class="tool-container" aria-live="polite" hidden>
    <h2>ভিডিও থেকে সাবটাইটেল বের করুন</h2>
    <label for="subtitle-upload">ভিডিও আপলোড করুন:</label>
    <input type="file" id="subtitle-upload" accept="video/*" />
    <label for="subtitle-lang">ভাষা নির্বাচন করুন:</label>
    <select id="subtitle-lang">
      <option value="en">English</option>
      <option value="bn">Bengali</option>
      <option value="zh">Chinese</option>
      <option value="ar">Arabic</option>
      <option value="hi">Hindi</option>
      <option value="es">Spanish</option>
      <option value="fr">French</option>
      <option value="ru">Russian</option>
      <option value="de">German</option>
      <option value="ja">Japanese</option>
      <option value="pt">Portuguese</option>
      <option value="tr">Turkish</option>
      <option value="it">Italian</option>
      <option value="ko">Korean</option>
      <option value="vi">Vietnamese</option>
      <option value="fa">Persian</option>
      <option value="pl">Polish</option>
      <option value="uk">Ukrainian</option>
      <option value="nl">Dutch</option>
      <option value="th">Thai</option>
      <option value="id">Indonesian</option>
      <option value="ro">Romanian</option>
      <option value="hu">Hungarian</option>
      <option value="el">Greek</option>
      <option value="sv">Swedish</option>
      <option value="cs">Czech</option>
      <option value="sr">Serbian</option>
      <option value="he">Hebrew</option>
      <option value="no">Norwegian</option>
      <option value="da">Danish</option>
      <option value="fi">Finnish</option>
      <option value="sk">Slovak</option>
      <option value="bg">Bulgarian</option>
      <option value="hr">Croatian</option>
      <option value="ms">Malay</option>
      <option value="sl">Slovenian</option>
      <option value="ca">Catalan</option>
      <option value="et">Estonian</option>
      <option value="lt">Lithuanian</option>
      <option value="lv">Latvian</option>
      <option value="ta">Tamil</option>
      <option value="te">Telugu</option>
      <option value="ur">Urdu</option>
      <option value="ml">Malayalam</option>
      <option value="mr">Marathi</option>
      <option value="gu">Gujarati</option>
      <option value="kn">Kannada</option>
      <option value="pa">Punjabi</option>
    </select>
    <button class="action-btn" onclick="extractSubtitle()">সাবটাইটেল বের করুন</button>
    <div id="subtitle-result" style="margin-top:15px; text-align:center;"></div>
  </section>
  <div class="ad-social-bar" aria-label="Social bar advertisement">
    <!-- Ad 3 -->
    <script type="text/javascript">
      atOptions = {'key' : '41d441d42cfcb646f345f74b375ab39f','format' : 'iframe','height' : 50,'width' : 320,'params' : {}};
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/41d441d42cfcb646f345f74b375ab39f/invoke.js"></script>
  </div>
</main>
<!-- সাবস্ক্রাইব কনফার্মেশন মডাল -->
<div id="subscribeModal">
  <div class="modal-content">
    <span class="close-x" onclick="closeModal()">&times;</span>
    <img src="https://pplx-res.cloudinary.com/image/upload/v1747016016/user_uploads/68550677/f9b430d8-0209-4537-b6c6-2c053e416161/X0fcAJWgSoOcjzWJamUK5Q.jpg" alt="Subscribe" />
    <h3 style="color:#00bfa5;">সাবস্ক্রাইব করুন</h3>
    <p>ডাউনলোড করতে হলে Islamic Motivational Line চ্যানেলটি সাবস্ক্রাইব করুন।</p>
    <a href="https://youtube.com/@islamicmotivationalline?sub_confirmation=1" target="_blank" class="download-btn" style="background:#ff0000;">সাবস্ক্রাইব করুন</a>
    <button onclick="confirmSubscribed()">করেছি করেছি</button>
  </div>
</div>
<script>
// টুল লিস্ট
const tools = [
  {id:'homeScreen', name:'হোম'},
  {id:'aiImageTool', name:'AI ছবি তৈরি'},
  {id:'qrCodeTool', name:'QR কোড জেনারেটর'},
  {id:'barcodeTool', name:'বারকোড জেনারেটর'},
  {id:'videoConverter', name:'ভিডিও কনভার্টার'},
  {id:'imageResizer', name:'ছবি রিসাইজার'},
  {id:'voiceTool', name:'ভয়েস জেনারেশন'},
  {id:'subtitleTool', name:'ভিডিও থেকে সাবটাইটেল'}
];
const toolList = document.getElementById('toolList');
tools.forEach(tool => {
  const li = document.createElement('li');
  const btn = document.createElement('button');
  btn.textContent = tool.name;
  btn.setAttribute('aria-label', tool.name + ' টুল খুলুন');
  btn.onclick = () => {
    document.getElementById('drawerToggle').checked = false;
    showTool(tool.id);
  };
  li.appendChild(btn);
  toolList.appendChild(li);
});
function showTool(id) {
  document.querySelectorAll('.tool-container').forEach(div => {
    div.classList.remove('active'); div.hidden = true;
  });
  const el = document.getElementById(id);
  if(el) { el.classList.add('active'); el.hidden = false; }
}
// সাবস্ক্রাইব কনফার্মেশন
let downloadCallback = null;
function showSubscribeModal(callback) {
  downloadCallback = callback;
  document.getElementById('subscribeModal').style.display = 'flex';
}
function closeModal() {
  document.getElementById('subscribeModal').style.display = 'none';
}
function confirmSubscribed() {
  localStorage.setItem('subscribed', 'true');
  closeModal();
  if(typeof downloadCallback === 'function') downloadCallback();
}
function checkSubscription(callback) {
  if(localStorage.getItem('subscribed') === 'true') { callback(); }
  else showSubscribeModal(callback);
}
document.getElementById('subscribeBtn').addEventListener('click', () => {
  setTimeout(() => {
    if(confirm('আপনি কি নিশ্চিত যে আপনি চ্যানেলটি সাবস্ক্রাইব করেছেন?')) {
      localStorage.setItem('subscribed', 'true');
      alert('ধন্যবাদ! আপনি এখন ডাউনলোড করতে পারবেন।');
    }
  }, 2000);
});

// AI ছবি জেনারেটর (Craiyon API ডেমো, সর্বোচ্চ ৫টি)
async function generateImage() {
  const prompt = document.getElementById('prompt').value.trim();
  const count = Math.max(1, Math.min(5, parseInt(document.getElementById('imgCount').value)));
  const resultDiv = document.getElementById('image-result');
  const downloadsDiv = document.getElementById('image-downloads');
  if(!prompt) { alert('অনুগ্রহ করে ছবির বর্ণনা লিখুন।'); return; }
  resultDiv.innerHTML = '<div class="loader"></div>';
  downloadsDiv.innerHTML = '';
  try {
    const res = await fetch("https://backend.craiyon.com/generate", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({prompt})
    });
    const data = await res.json();
    let imgs = data.images.slice(0,count).map(b64 => "data:image/png;base64,"+b64);
    resultDiv.innerHTML = imgs.map(src=>`<img src="${src}" class="rounded-image" style="margin:8px;" />`).join('');
    downloadsDiv.innerHTML = imgs.map((src,idx)=>`<a href="${src}" download="ai-image-${idx+1}.png" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${src}','_blank')})">ডাউনলোড ${idx+1}</a>`).join(' ');
  } catch(e) {
    resultDiv.innerHTML = '<p style="color:#ffb300;">AI ছবি জেনারেটর সার্ভার ব্যস্ত, আবার চেষ্টা করুন।</p>';
  }
}

// QR কোড: সোশ্যাল মিডিয়া লোগোসহ
const qrLogos = {
  youtube: "https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png",
  facebook: "https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",
  gmail: "https://upload.wikimedia.org/wikipedia/commons/4/4e/Gmail_Icon.png",
  tiktok: "https://upload.wikimedia.org/wikipedia/commons/6/69/TikTok_logo.svg",
  instagram: "https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png",
  whatsapp: "https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",
  twitter: "https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg",
  snapchat: "https://upload.wikimedia.org/wikipedia/en/a/ad/Snapchat_logo.svg",
  pinterest: "https://upload.wikimedia.org/wikipedia/commons/0/08/Pinterest-logo.png",
  linkedin: "https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png",
  telegram: "https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg",
  imo: "https://upload.wikimedia.org/wikipedia/commons/2/21/IMO_logo.png",
  messenger: "https://upload.wikimedia.org/wikipedia/commons/8/83/Facebook_Messenger_4_Logo.svg",
  reddit: "https://upload.wikimedia.org/wikipedia/en/8/82/Reddit_logo_and_wordmark.svg",
  skype: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Skype_icon_2019.svg"
};
function generateQR() {
  const type = document.getElementById('qr-type').value;
  let url = document.getElementById('qr-input').value.trim();
  const qrDiv = document.getElementById('qr-result');
  const downloadsDiv = document.getElementById('qr-downloads');
  if(!url) { alert('অনুগ্রহ করে URL দিন।'); return; }
  qrDiv.innerHTML = '<div class="loader"></div>';
  downloadsDiv.innerHTML = '';
  setTimeout(()=>{
    const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(url)}`;
    const logoUrl = qrLogos[type];
    if(logoUrl){
      // ক্যানভাসে QR + লোগো ড্র
      const canvas = document.createElement('canvas');
      canvas.width = canvas.height = 250;
      const ctx = canvas.getContext('2d');
      const qrImg = new window.Image();
      qrImg.crossOrigin = "anonymous";
      qrImg.onload = function() {
        ctx.drawImage(qrImg,0,0,250,250);
        const logo = new window.Image();
        logo.crossOrigin = "anonymous";
        logo.onload = function() {
          ctx.save();
          ctx.beginPath();
          ctx.arc(125,125,32,0,2*Math.PI);
          ctx.closePath();
          ctx.clip();
          ctx.drawImage(logo,93,93,64,64);
          ctx.restore();
          qrDiv.innerHTML = '';
          qrDiv.appendChild(canvas);
          downloadsDiv.innerHTML = `<a href="${canvas.toDataURL('image/png')}" download="qr-code.png" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${canvas.toDataURL('image/png')}','_blank')})">ডাউনলোড</a>`;
        };
        logo.src = logoUrl;
      };
      qrImg.src = qrUrl;
    } else {
      qrDiv.innerHTML = `<img src="${qrUrl}" alt="QR Code" class="rounded-image" style="width:250px;height:250px;" />`;
      downloadsDiv.innerHTML = `<a href="${qrUrl}" download="qr-code.png" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${qrUrl}','_blank')})">ডাউনলোড</a>`;
    }
  }, 1000);
}
// বারকোড
function generateBarcode() {
  const val = document.getElementById('barcode-input').value.trim();
  const resultDiv = document.getElementById('barcode-result');
  const downloadsDiv = document.getElementById('barcode-downloads');
  if(!val) { alert('বারকোডের জন্য টেক্সট/নাম্বার দিন'); return;}
  resultDiv.innerHTML = '<div class="loader"></div>';
  downloadsDiv.innerHTML = '';
  setTimeout(()=>{
    const img = `https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(val)}&code=EAN13&translate-esc=true`;
    resultDiv.innerHTML = `<img src="${img}" class="rounded-image" />`;
    downloadsDiv.innerHTML = `<a href="${img}" download="barcode.png" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${img}','_blank')})">ডাউনলোড</a>`;
  }, 1000);
}
// ভিডিও কনভার্টার (ডেমো: নাম ও টাইপ পরিবর্তন)
function convertVideo() {
  const fileInput = document.getElementById('video-upload');
  const format = document.getElementById('video-format').value;
  const resultDiv = document.getElementById('video-result');
  const downloadsDiv = document.getElementById('video-downloads');
  if(fileInput.files.length === 0) { alert('ভিডিও আপলোড করুন'); return;}
  const file = fileInput.files[0];
  resultDiv.innerHTML = '<div class="loader"></div>';
  downloadsDiv.innerHTML = '';
  setTimeout(()=>{
    const reader = new FileReader();
    reader.onload = function(e) {
      const blob = new Blob([e.target.result], {type:`video/${format}`});
      const url = URL.createObjectURL(blob);
      resultDiv.innerHTML = `<video src="${url}" controls style="max-width:100%;border-radius:12px;"></video>`;
      downloadsDiv.innerHTML = `<a href="${url}" download="converted.${format}" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${url}','_blank')})">ডাউনলোড</a>`;
    };
    reader.readAsArrayBuffer(file);
  }, 1200);
}
// ছবি রিসাইজার
function resizeImage() {
  const fileInput = document.getElementById('resize-upload');
  const width = parseInt(document.getElementById('resize-width').value);
  const height = parseInt(document.getElementById('resize-height').value);
  const resultDiv = document.getElementById('resize-result');
  const downloadsDiv = document.getElementById('resize-downloads');
  if(fileInput.files.length === 0) { alert('ছবি আপলোড করুন'); return;}
  if(!width || !height) { alert('নতুন width ও height দিন'); return;}
  const file = fileInput.files[0];
  resultDiv.innerHTML = '<div class="loader"></div>';
  downloadsDiv.innerHTML = '';
  const reader = new FileReader();
  reader.onload = function(e) {
    const img = new Image();
    img.onload = function() {
      const canvas = document.createElement('canvas');
      canvas.width = width; canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img,0,0,width,height);
      const dataUrl = canvas.toDataURL('image/png');
      resultDiv.innerHTML = `<img src="${dataUrl}" class="rounded-image" />`;
      downloadsDiv.innerHTML = `<a href="${dataUrl}" download="resized-image.png" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${dataUrl}','_blank')})">ডাউনলোড</a>`;
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}
// ভয়েস প্যাক (পপুলার)
const voicePacks = [
  {id:'bn-male-1', name:'বাংলা - পুরুষ ১'}, {id:'bn-female-1', name:'বাংলা - মহিলা ১'},
  {id:'en-male-1', name:'English - Male 1'}, {id:'en-female-1', name:'English - Female 1'},
  {id:'ar-male-1', name:'Arabic - Male 1'}, {id:'ar-female-1', name:'Arabic - Female 1'},
  {id:'hi-male-1', name:'Hindi - Male 1'}, {id:'hi-female-1', name:'Hindi - Female 1'},
  {id:'es-male-1', name:'Spanish - Male 1'}, {id:'es-female-1', name:'Spanish - Female 1'},
  {id:'fr-male-1', name:'French - Male 1'}, {id:'fr-female-1', name:'French - Female 1'}
];
const voiceSelect = document.getElementById('voice-select');
voicePacks.forEach(v => {
  const opt = document.createElement('option');
  opt.value = v.id;
  opt.textContent = v.name;
  voiceSelect.appendChild(opt);
});
// ভয়েস জেনারেশন ও ডাউনলোড (MediaRecorder)
let mediaRecorder, audioChunks = [];
function generateVoice() {
  const text = document.getElementById('voice-text').value.trim();
  const audioElem = document.getElementById('voice-audio');
  const downloadsDiv = document.getElementById('voice-downloads');
  if(!text) { alert('অনুগ্রহ করে ভয়েসের জন্য টেক্সট লিখুন।'); return; }
  if (!('speechSynthesis' in window) || !('MediaRecorder' in window)) {
    alert('আপনার ব্রাউজার ভয়েস ডাউনলোড সাপোর্ট করে না।'); return;
  }
  const utter = new SpeechSynthesisUtterance(text);
  const voices = speechSynthesis.getVoices();
  const sel = voiceSelect.value.toLowerCase();
  let voiceToUse = voices[0];
  if(sel.includes('bn')) voiceToUse = voices.find(v => v.lang.startsWith('bn')) || voices[0];
  else if(sel.includes('en')) voiceToUse = voices.find(v => v.lang.startsWith('en')) || voices[0];
  else if(sel.includes('ar')) voiceToUse = voices.find(v => v.lang.startsWith('ar')) || voices[0];
  else if(sel.includes('hi')) voiceToUse = voices.find(v => v.lang.startsWith('hi')) || voices[0];
  else if(sel.includes('es')) voiceToUse = voices.find(v => v.lang.startsWith('es')) || voices[0];
  else if(sel.includes('fr')) voiceToUse = voices.find(v => v.lang.startsWith('fr')) || voices[0];
  utter.voice = voiceToUse;
  const synth = window.speechSynthesis;
  const audioCtx = new(window.AudioContext||window.webkitAudioContext)();
  const dest = audioCtx.createMediaStreamDestination();
  mediaRecorder = new MediaRecorder(dest.stream);
  audioChunks = [];
  mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
  mediaRecorder.onstop = () => {
    const audioBlob = new Blob(audioChunks, {type:'audio/webm'});
    const url = URL.createObjectURL(audioBlob);
    audioElem.src = url;
    audioElem.style.display = 'block';
    downloadsDiv.innerHTML = `<a href="${url}" download="voice.webm" class="download-btn" onclick="event.preventDefault();checkSubscription(()=>{window.open('${url}','_blank')})">ডাউনলোড</a>`;
  };
  mediaRecorder.start();
  synth.speak(utter);
  utter.onend = () => {
    setTimeout(()=>{ mediaRecorder.stop(); audioCtx.close(); }, 250);
  };
}
// ভিডিও থেকে সাবটাইটেল (ডেমো: ফাইল নাম ও ভাষা দেখানো)
function extractSubtitle() {
  const input = document.getElementById('subtitle-upload');
  const lang = document.getElementById('subtitle-lang').options[document.getElementById('subtitle-lang').selectedIndex].text;
  const resultDiv = document.getElementById('subtitle-result');
  if(input.files.length === 0) { alert('ভিডিও আপলোড করুন'); return;}
  const file = input.files[0];
  resultDiv.innerHTML = '<div class="loader"></div>';
  setTimeout(()=>{
    resultDiv.innerHTML = `<p style="color:#00e5ff;">আপনার ভিডিও: <b>${file.name}</b><br>নির্বাচিত ভাষা: <b>${lang}</b><br><br>সাবটাইটেল বের করার জন্য Whisper API/AssemblyAI API ব্যবহার করুন।<br>এটি ডেমো।</p>`;
  }, 2000);
}
</script>
</body>
</html>
