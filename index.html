<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AR TOOL - Free Tools</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Da+2:wght@600;700&family=Tiro+Bangla:ital,wght@0,400;1,400&family=Hind+Siliguri:wght@400;700&family=Poppins:wght@700&family=Nunito:wght@700&family=Inter:wght@700&display=swap" rel="stylesheet">
<style>
:root {
  --main-bg: #f8f5f2;
  --drawer-bg: linear-gradient(145deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
  --card-bg: rgba(255, 255, 255, 0.9);
  --primary: #00796b;
  --primary-dark: #004d40;
  --accent: #ffc107;
  --text-primary: #212121;
  --text-secondary: #757575;
  --text-on-drawer: #e0f2f1;
  --border-soft: 1px solid #e0e0e0;
  --shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  --shadow-hover: 0 12px 35px rgba(0, 0, 0, 0.15);
  --font-bn: 'Baloo Da 2', 'Tiro Bangla', 'Hind Siliguri', 'Noto Sans Bengali', sans-serif;
  --font-en: 'Poppins', 'Nunito', 'Inter', Arial, sans-serif;
  --border-radius-main: 12px;
  --border-radius-small: 8px;
}
body {
  background: var(--main-bg);
  min-height: 100vh;
  margin: 0;
  font-family: var(--font-bn), var(--font-en);
  color: var(--text-primary);
  transition: background-color 0.3s ease;
}
header {
  background: rgba(255,255,255,0.95);
  color: var(--primary-dark);
  font-size: 2rem;
  font-weight: 700;
  padding: 15px 10px;
  text-align: center;
  letter-spacing: 1.5px;
  position: fixed;
  width: 100%;
  top: 0; left: 0;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  border-bottom: 1px solid #e0e0e0;
  backdrop-filter: blur(8px);
  display: flex; align-items: center; justify-content: center;
  z-index: 1002;
}
header .title {
  font-family: var(--font-en);
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--primary-dark);
  background: linear-gradient(90deg, var(--primary) 30%, var(--primary-dark) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 1px 1px 2px rgba(0, 77, 64, 0.1);
  padding: 0 10px;
  border-radius: var(--border-radius-small);
  transition: all 0.3s ease;
  text-align: center;
  display: inline-block;
  vertical-align: middle;
}
header .title:hover {
  transform: scale(1.03);
}
header .logo-img {
  height: 42px; width: 42px; margin-left: 14px; border-radius: var(--border-radius-small); box-shadow: 0 2px 8px rgba(0, 121, 107, 0.2);
  background: #fff;
  padding: 3px;
  object-fit: contain;
  vertical-align: middle;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
header .logo-img:hover {
    transform: rotate(10deg) scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 121, 107, 0.3);
}
label[for="drawerToggle"] {
  position: fixed; top: 22px; left: 20px;
  font-size: 2rem; color: var(--primary-dark);
  cursor: pointer; z-index: 1103; user-select: none;
  transition: color 0.3s ease, transform 0.3s ease;
}
label[for="drawerToggle"]:hover {
  color: var(--primary);
  transform: scale(1.1);
}
#drawerToggle { display: none; }
#drawerToggle:checked ~ #drawer { transform: translateX(0); }
#drawer {
  position: fixed; top: 0; bottom: 0; left: 0;
  width: 220px;
  background: var(--drawer-bg);
  box-shadow: 5px 0 25px rgba(0,0,0,0.2);
  padding-top: 70px;
  overflow-y: auto;
  transform: translateX(-260px);
  transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
  z-index: 2000;
  border-right: none !important;
  border-radius: 0 var(--border-radius-main) var(--border-radius-main) 0;
}
#drawer label.close-btn {
  position: absolute; top: 15px; right: 15px;
  font-size: 2.2rem; color: var(--text-on-drawer); cursor: pointer;
  transition: color 0.3s ease, transform 0.3s ease;
}
#drawer label.close-btn:hover {
  color: var(--accent);
  transform: rotate(90deg) scale(1.1);
}
#drawer ul { list-style: none; margin:0; padding:0; }
#drawer ul li { border-bottom: 1px solid rgba(255,255,255,0.1); }
#drawer ul li button {
  width: 100%; padding: 16px 20px;
  background: transparent; border: none;
  color: var(--text-on-drawer); font-size: 1.05rem;
  font-family: var(--font-bn), var(--font-en);
  text-align: left; cursor: pointer;
  font-weight: 600; letter-spacing: .3px;
  border-radius: 0;
  transition: background 0.2s ease-in-out, color 0.2s ease-in-out, padding-left 0.2s ease-in-out;
}
#drawer ul li button:hover, #drawer ul li button.active {
  background: rgba(255, 255, 255, 0.1);
  color: var(--accent);
  padding-left: 25px;
}
#drawer ul li button.active {
    border-left: 3px solid var(--accent);
}

/* AI Tools Section Styles */
.ai-tool-card {
  background: var(--card-bg);
  border-radius: var(--border-radius-small);
  padding: 15px;
  margin-bottom: 15px;
  box-shadow: var(--shadow);
  border: var(--border-soft);
}
.ai-tool-card h3 {
  margin-top: 0;
  color: var(--primary-dark);
  border-bottom: 1px solid var(--primary);
  padding-bottom: 5px;
}
.ai-tool-card p {
  margin: 8px 0;
  color: var(--text-secondary);
}
.ai-tool-link {
  display: inline-block;
  margin-top: 10px;
  padding: 8px 15px;
  background: var(--primary);
  color: white;
  text-decoration: none;
  border-radius: var(--border-radius-small);
  font-weight: 600;
  transition: background 0.3s ease;
}
.ai-tool-link:hover {
  background: var(--primary-dark);
}

main {
  max-width: 980px; margin: 110px auto 40px; padding: 0 15px;
}
section {
  margin-bottom: 40px;
  background: var(--card-bg);
  border-radius: var(--border-radius-main);
  padding: 25px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  border: var(--border-soft);
  transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
}
section:hover {
  box-shadow: var(--shadow-hover);
  transform: translateY(-5px);
}
h2 {
  font-family: var(--font-bn), var(--font-en);
  font-size: 1.4rem; margin-bottom: 18px;
  color: var(--primary-dark); border-bottom: 2px solid var(--primary);
  padding-bottom: 10px; text-shadow: none;
  letter-spacing: 0.8px;
}
label {color: var(--text-secondary); font-weight:600; font-family:var(--font-bn),var(--font-en);}
input, select, textarea {
  width: 100%; padding: 12px 15px; border-radius: var(--border-radius-small);
  border: 1px solid #ccc;
  font-size: 1rem; outline: none; margin-top: 10px;
  background: #fff; color: var(--text-primary);
  font-family: var(--font-bn), var(--font-en);
  box-shadow: 0 1px 3px rgba(0,0,0,0.05) inset;
  transition: box-shadow 0.25s ease, border-color 0.25s ease;
}
input:focus, select:focus, textarea:focus {
  box-shadow: 0 0 0 3px rgba(0, 121, 107, 0.2);
  border-color: var(--primary);
}
img.hero-img {
  border-radius: var(--border-radius-main); max-width: 100%; height: auto; margin-bottom: 20px;
  box-shadow: 0 8px 20px rgba(0, 121, 107, 0.15);
  display: block;
  margin-left: auto;
  margin-right: auto;
  transition: transform 0.3s ease;
}
img.hero-img:hover {
    transform: scale(1.03);
}

button.action-btn, a.download-btn, button.play-btn {
  display: inline-block; margin: 15px 10px 0 0;
  background: var(--primary);
  color: #fff; border: none; padding: 12px 30px;
  border-radius: var(--border-radius-small); font-weight: 700; font-size: 1.05rem;
  text-decoration: none; box-shadow: 0 4px 12px rgba(0, 121, 107, 0.25);
  font-family: var(--font-en), var(--font-bn);
  transition: background 0.25s ease, transform 0.15s ease, box-shadow 0.25s ease;
  cursor:pointer;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
button.action-btn:hover, a.download-btn:hover, button.play-btn:hover {
  background: var(--primary-dark); transform: translateY(-3px) scale(1.03);
  box-shadow: 0 6px 18px rgba(0, 77, 64, 0.3);
}
.ad-box {
  background: #e8eaf6;
  color: var(--text-secondary); text-align: center; border-radius: var(--border-radius-small);
  margin: 20px 0; padding: 15px;
  font-weight: 600; font-size: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  border: 1px solid #c5cae9;
  min-height: 70px;
  display: flex; align-items: center; justify-content: center;
}
.loader {
  border: 4px solid #e0e0e0; border-top: 4px solid var(--primary);
  border-radius: 50%; width: 32px; height: 32px;
  animation: spin 0.8s linear infinite; margin: 20px auto;
}
#voice-select {
  width: 100%;
  padding: 12px 15px;
  border-radius: var(--border-radius-small);
  border: 1px solid #ccc;
  background: #fff;
  color: var(--text-primary);
  font-size: 1rem;
  font-family: var(--font-en), var(--font-bn);
  box-shadow: 0 1px 3px rgba(0,0,0,0.05) inset;
  margin-bottom: 10px;
  margin-top: 10px;
  transition: border-color 0.25s ease, box-shadow 0.25s ease;
}
#voice-select:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(0, 121, 107, 0.2);
  outline: none;
}
.rounded-image {
    border-radius: var(--border-radius-small);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 5px;
    background: #fff;
    border: 1px solid #eee;
}
@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.tool-container {
  animation: fadeIn 0.5s ease-out forwards;
}

@media (max-width: 700px) {
  main { margin: 90px 10px 30px; padding: 0 5px;}
  #drawer { width: 200px; padding-top: 65px;}
  label[for="drawerToggle"] { font-size: 1.8rem; left: 15px; top: 18px;}
  header { padding: 12px 10px; font-size: 1.8rem; }
  header .title { font-size: 1.8rem; }
  header .logo-img { height: 38px; width: 38px;}
  section { padding: 20px; }
  h2 { font-size: 1.25rem; }
  button.action-btn, a.download-btn, button.play-btn { font-size: 0.95rem; padding: 10px 20px; }
  .ai-tool-card { padding: 12px; }
}
</style>
</head>
<body>
<header>
  <label for="drawerToggle" aria-label="Open menu">&#9776;</label>
  <span class="title">AR TOOL</span>
  <img src="https://pplx-res.cloudinary.com/image/upload/v1747135083/user_uploads/68550677/7abffe0d-1016-4571-963b-00904ee3204a/s9sCVOASf25xOhVWv4B8g.jpg" alt="AR TOOL Logo" class="logo-img" />
</header>
<input type="checkbox" id="drawerToggle" aria-label="Toggle navigation drawer" />
<nav id="drawer" aria-label="Tool navigation drawer">
  <label for="drawerToggle" class="close-btn" aria-label="Close menu">&times;</label>
  <ul id="toolList" role="menu" aria-label="Tool list"></ul>
  
  <!-- All AI Tools Button -->
  <ul>
    <li>
      <button id="showAIToolsBtn">All AI Tools</button>
    </li>
  </ul>
</nav>
<main>
  <!-- হোমপেজ -->
  <section id="homeScreen" class="tool-container active" aria-live="polite">
    <img src="https://pplx-res.cloudinary.com/image/upload/v1747016016/user_uploads/68550677/f9b430d8-0209-4537-b6c6-2c053e416161/X0fcAJWgSoOcjzWJamUK5Q.jpg" class="hero-img" alt="Islamic Motivational Line" />
    <h2>Islamic Motivational Line</h2>
    <p style="font-size:1.13rem; color:var(--primary-dark); font-weight:700; margin-bottom:10px;">
      🌿 <span style="color:var(--primary);">"আল্লাহর উপর ভরসা করো, তিনিই যথেষ্ট।"</span>
    </p>
    <a href="https://youtube.com/@islamicmotivationalline?sub_confirmation=1" target="_blank" class="download-btn" style="font-size:1.1rem; margin-bottom:10px; background: var(--accent); color: var(--primary-dark);">
      ✨ এই চ্যানেলটি সাবস্ক্রাইব করে আসুন - এটি একটি ইসলামিক চ্যানেল ✨
    </a>
    <p style="margin-top:14px; color: var(--text-secondary);">এক ক্লিকে QR কোড, বারকোড, ছবি রিসাইজ, ভয়েস তৈরি, ভিডিও কনভার্টসহ আরও অনেক টুলস! সহজ, দ্রুত, ফ্রি।</p>
    <div class="ad-box" id="ad-home"></div>
  </section>
  
  <!-- AI Tools Section -->
  <section id="aiToolsSection" class="tool-container" aria-live="polite" hidden>
    <h2>All Free AI Tools</h2>
    <div id="aiToolsListContainer">
      <!-- AI Tools will be inserted here by JavaScript -->
    </div>
    <button class="action-btn" onclick="hideAITools()">Back to Home</button>
  </section>

  <!-- QR Code Generator -->
  <section id="qrCodeTool" class="tool-container" aria-live="polite" hidden>
    <h2>QR কোড তৈরি করুন</h2>
    <label for="qr-type">QR কোডের ধরণ:</label>
    <select id="qr-type">
      <option value="youtube">YouTube</option>
      <option value="facebook">Facebook</option>
      <option value="gmail">Gmail</option>
      <option value="tiktok">TikTok</option>
     <option value="instagram">Instagram</option>
      <option value="whatsapp">WhatsApp</option>
      <option value="twitter">Twitter</option>
      <option value="snapchat">Snapchat</option>
      <option value="pinterest">Pinterest</option>
      <option value="linkedin">LinkedIn</option>
      <option value="telegram">Telegram</option>
      <option value="imo">IMO</option>
      <option value="messenger">Messenger</option>
      <option value="reddit">Reddit</option>
      <option value="skype">Skype</option>
    </select>
    <label for="qr-input">URL বা লিঙ্ক দিন:</label>
    <input type="url" id="qr-input" placeholder="যেমন: https://www.youtube.com/channel/..." />
    <button class="action-btn" onclick="generateQR()">QR কোড তৈরি করুন</button>
    <div id="qr-error" style="color:#e53935;font-weight:700;margin:10px 0;"></div>
    <div id="qr-result" style="margin-top:15px; text-align:center;"></div>
    <div id="qr-downloads"></div>
  </section>
  <!-- Barcode Generator -->
  <section id="barcodeTool" class="tool-container" aria-live="polite" hidden>
    <h2>বারকোড জেনারেটর</h2>
    <label for="barcode-input">বারকোডের জন্য টেক্সট/নাম্বার দিন:</label>
    <input type="text" id="barcode-input" placeholder="যেমন: 123456789012" />
    <button class="action-btn" onclick="generateBarcode()">বারকোড তৈরি করুন</button>
    <div id="barcode-result" style="margin-top:15px; text-align:center;"></div>
    <div id="barcode-downloads"></div>
  </section>
  <!-- Image Resizer -->
  <section id="imageResizer" class="tool-container" aria-live="polite" hidden>
    <h2>ছবি রিসাইজার</h2>
    <label for="resize-upload">ছবি আপলোড করুন:</label>
    <input type="file" id="resize-upload" accept="image/*" />
    <label for="resize-width">নতুন Width (px):</label>
    <input type="number" id="resize-width" min="1" placeholder="Width" />
    <label for="resize-height">নতুন Height (px):</label>
    <input type="number" id="resize-height" min="1" placeholder="Height" />
    <button class="action-btn" onclick="resizeImage()">রিসাইজ করুন</button>
    <div id="resize-result" style="margin-top:15px; text-align:center;"></div>
    <div id="resize-downloads"></div>
  </section>
  <!-- ভিডিও কনভার্টার -->
  <section id="videoConverter" class="tool-container" aria-live="polite" hidden>
    <h2>ভিডিও কনভার্টার</h2>
    <label for="video-upload">ভিডিও আপলোড করুন:</label>
    <input type="file" id="video-upload" accept="video/*" />
    <label for="video-format">ফরম্যাট নির্বাচন করুন:</label>
    <select id="video-format">
      <option value="mp4">MP4</option>
      <option value="webm">WebM</option>
      <option value="ogg">OGG</option>
    </select>
    <button class="action-btn" onclick="convertVideo()">কনভার্ট করুন</button>
    <div id="video-result" style="margin-top:15px; text-align:center;"></div>
    <div id="video-downloads"></div>
    <small style="color:var(--accent); font-weight: 600;">* বড় ভিডিও ফাইলের জন্য client-side কনভার্সন স্লো হতে পারে।</small>
  </section>
  <!-- ভয়েস জেনারেটর -->
  <section id="voiceTool" class="tool-container" aria-live="polite" hidden>
    <h2>ভয়েস তৈরি করুন</h2>
    <label for="voice-select">ভয়েস নির্বাচন করুন:</label>
    <select id="voice-select" size="12"></select>
    <label for="voice-text">ভয়েসের জন্য টেক্সট লিখুন:</label>
    <textarea id="voice-text" rows="3" placeholder="আপনার টেক্সট লিখুন"></textarea>
    <button class="action-btn" onclick="generateVoice()">ভয়েস তৈরি করুন</button>
    <div style="margin-top:15px; text-align:center;">
      <button class="play-btn" id="play-voice" style="display:none;">▶️ শুনুন</button>
      <a href="#" id="download-voice" class="download-btn" style="display:none;">ডাউনলোড</a>
      <audio id="voice-audio" style="display:none; width: 100%; margin-top: 10px;"></audio>
    </div>
  </section>
</main>
<script>
// Tool switcher
const tools = [
  {id:'homeScreen', name:'হোম'},
  {id:'qrCodeTool', name:'QR কোড'},
  {id:'barcodeTool', name:'বারকোড'},
  {id:'imageResizer', name:'ছবি রিসাইজার'},
  {id:'videoConverter', name:'ভিডিও কনভার্টার'},
  {id:'voiceTool', name:'ভয়েস'}
];
const toolList = document.getElementById('toolList');
tools.forEach((tool, idx) => {
  const li = document.createElement('li');
  const btn = document.createElement('button');
  btn.textContent = tool.name;
  btn.onclick = () => {
    document.querySelectorAll('.tool-container').forEach(div => {
      div.classList.remove('active'); div.hidden = true;
    });
    document.querySelectorAll('#toolList button').forEach(b=>b.classList.remove('active'));
    const el = document.getElementById(tool.id);
    if(el) { el.classList.add('active'); el.hidden = false; }
    btn.classList.add('active');
    // Close drawer on mobile after selection
    if (window.innerWidth <= 700) {
        document.getElementById('drawerToggle').checked = false;
    }
  };
  if(idx===0) btn.classList.add('active');
  li.appendChild(btn);
  toolList.appendChild(li);
});

// AI Tools Data
const aiTools = [
  {
    name: "Aixploria",
    description: "৫,০০০+ ফ্রি AI টুলসের ডিরেক্টরি",
    details: "বিভিন্ন ক্যাটাগরি ও ফিচারের উপর ভিত্তি করে AI টুলস খোঁজার সুযোগ।",
    link: "https://www.aixploria.com/en/free-ai/"
  },
  {
    name: "Reddit AI Tools",
    description: "১,০০০+ AI টুলসের তালিকা স্প্রেডশীটে",
    details: "Reddit কমিউনিটির তৈরি বিশাল AI টুলস ডাটাবেস",
    link: "https://www.reddit.com/r/n8n/comments/1idgl31/the_ultimate_list_of_ai_tools_in_2025/"
  },
  {
    name: "Leonardo AI",
    description: "AI চিত্র তৈরি",
    details: "প্রতিদিন ৫০টি ছবি তৈরি করতে পারবেন",
    link: "https://app.leonardo.ai"
  },
  {
    name: "Bing Image Creator",
    description: "DALL·E 3 দিয়ে ছবি তৈরি",
    details: "প্রতিদিন প্রথম ১০০টি ছবি দ্রুত তৈরি করা যায়, এরপর ধীরে",
    link: "https://www.bing.com/create"
  },
  {
    name: "Google Gemini",
    description: "কোড লেখা সহায়তা",
    details: "মাসে ১৮০,০০০ কোড পর্যন্ত ব্যবহার করতে পারবেন",
    link: "https://cloud.google.com"
  },
  {
    name: "Grammarly",
    description: "লেখার সংশোধন",
    details: "মাসে ১০০টি AI প্রম্পট ব্যবহার করতে পারবেন",
    link: "https://www.grammarly.com"
  },
  {
    name: "Copy.ai",
    description: "কনটেন্ট তৈরি",
    details: "মাসে ২,০০০ শব্দ পর্যন্ত ব্যবহার করতে পারবেন",
    link: "https://www.copy.ai"
  },
  {
    name: "Taskade",
    description: "নোট, টাস্ক, AI সহায়তা",
    details: "মাসে ১,০০০ অনুরোধ পর্যন্ত ব্যবহার করতে পারবেন",
    link: "https://www.taskade.com"
  },
  {
    name: "Perplexity.ai",
    description: "AI সার্চ ইঞ্জিন",
    details: "অসীমিত ব্যবহার করতে পারবেন",
    link: "https://www.perplexity.ai"
  },
  {
    name: "Lumen5",
    description: "টেক্সট থেকে ভিডিও",
    details: "মাসে ৫টি ভিডিও তৈরি করতে পারবেন",
    link: "https://www.lumen5.com"
  },
  {
    name: "Fliki",
    description: "ব্লগ থেকে ভিডিও",
    details: "মাসে ৫ মিনিট ভিডিও তৈরি করতে পারবেন",
    link: "https://fliki.ai"
  },
  {
    name: "SciSpace",
    description: "একাডেমিক পেপার বিশ্লেষণ",
    details: "অসীমিত ব্যবহার করতে পারবেন",
    link: "https://www.scispace.com"
  }
];

// Show AI Tools
function showAITools() {
  document.querySelectorAll('.tool-container').forEach(div => {
    div.classList.remove('active'); div.hidden = true;
  });
  
  const aiToolsSection = document.getElementById('aiToolsSection');
  const aiToolsListContainer = document.getElementById('aiToolsListContainer');
  
  // Clear previous list
  aiToolsListContainer.innerHTML = '';
  
  // Add all AI tools
  aiTools.forEach(tool => {
    const toolCard = document.createElement('div');
    toolCard.className = 'ai-tool-card';
    toolCard.innerHTML = `
      <h3>${tool.name}</h3>
      <p><strong>কাজ:</strong> ${tool.description}</p>
      <p><strong>বিস্তারিত:</strong> ${tool.details}</p>
      <a href="${tool.link}" target="_blank" class="ai-tool-link">Visit Website</a>
    `;
    aiToolsListContainer.appendChild(toolCard);
  });
  
  aiToolsSection.classList.add('active');
  aiToolsSection.hidden = false;
  
  // Close drawer on mobile
  if (window.innerWidth <= 700) {
    document.getElementById('drawerToggle').checked = false;
  }
}

// Hide AI Tools and return to home
function hideAITools() {
  document.querySelectorAll('.tool-container').forEach(div => {
    div.classList.remove('active'); div.hidden = true;
  });
  
  const homeScreen = document.getElementById('homeScreen');
  homeScreen.classList.add('active');
  homeScreen.hidden = false;
}

// Add event listener to AI Tools button
document.getElementById('showAIToolsBtn').addEventListener('click', showAITools);

// Failover Ads Loader
function loadFailoverAd(adConfigs, containerId) {
  const container = document.getElementById(containerId);
  if (!container) return;
  function tryAd(idx) {
    if (idx >= adConfigs.length) {
        container.innerHTML = '<p style="font-size:0.9rem; padding:10px;">বিজ্ঞাপন লোড হতে সমস্যা হচ্ছে।</p>';
        return;
    }
    const ad = adConfigs[idx];
    container.innerHTML = "";
    if (ad.type === 'iframe') {
      const iframe = document.createElement('iframe');
      iframe.width = String(ad.width);
      iframe.height = String(ad.height);
      iframe.style.border = "none";
      iframe.style.margin = "auto";
      iframe.style.display = "block";
      iframe.scrolling = "no";
      iframe.src = `https://www.highperformanceformat.com/${ad.key}/invoke.html`;
      let loaded = false;
      iframe.onload = function() { loaded = true; };
      iframe.onerror = function() { tryAd(idx + 1); };
      setTimeout(() => {
        if (!loaded && document.body.contains(iframe)) tryAd(idx + 1);
      }, 3500);
      container.appendChild(iframe);
    } else if (ad.type === 'js') {
      const script = document.createElement('script');
      script.type = "text/javascript";
      script.src = ad.src;
      script.async = true;
      let loaded = false;
      script.onload = function() { loaded = true; };
      script.onerror = function() { tryAd(idx + 1); };
      container.appendChild(script);
      setTimeout(() => {
        if (!loaded && document.body.contains(script)) tryAd(idx + 1);
       }, 3500);
    }
  }
  tryAd(0);
}

const adConfigs = [
  {
    type: 'iframe',
    key: 'f2483431b9841c0a784c64fc854bff54',
    width: '468', 
    height: '60'
  },
  {
    type: 'js',
    src: '//pl26618843.profitableratecpm.com/94/3f/5e/943f5e03599d84af35f7757a88eb292e.js'
  },
  {
    type: 'iframe',
    key: '41d441d42cfcb646f345f74b375ab39f',
    width: '320',
    height: '50'
  },
  {
    type: 'iframe',
    key: 'aa016bbfe87d311d3f46e09193ebff63',
    width: '160',
    height: '300'
  }
];

if (document.getElementById("ad-home")) {
    loadFailoverAd(adConfigs, "ad-home");
}

// --- QR কোড লজিক ---
const qrLogos = {
  youtube: "https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png",
  facebook: "https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",
  gmail: "https://upload.wikimedia.org/wikipedia/commons/4/4e/Gmail_Icon.png",
  tiktok: "https://upload.wikimedia.org/wikipedia/commons/6/69/TikTok_logo.svg",
  instagram: "https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png",
  whatsapp: "https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",
  twitter: "https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg",
  snapchat: "https://upload.wikimedia.org/wikipedia/en/a/ad/Snapchat_logo.svg",
  pinterest: "https://upload.wikimedia.org/wikipedia/commons/0/08/Pinterest-logo.png",
  linkedin: "https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png",
  telegram: "https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg",
  imo: "https://upload.wikimedia.org/wikipedia/commons/2/21/IMO_logo.png",
  messenger: "https://upload.wikimedia.org/wikipedia/commons/8/83/Facebook_Messenger_4_Logo.svg",
  reddit: "https://upload.wikimedia.org/wikipedia/en/8/82/Reddit_logo_and_wordmark.svg",
  skype: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Skype_icon_2019.svg"
};
const qrValidators = {
  youtube: url => /^https?:\/\/(www\.)?(youtube\.com|youtu\.be)\//i.test(url),
  facebook: url => /^https?:\/\/(www\.)?facebook\.com\//i.test(url),
  gmail: url => /^mailto:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/i.test(url) || /@gmail\.com$/i.test(url),
  tiktok: url => /^https?:\/\/(www\.)?tiktok\.com\//i.test(url),
  instagram: url => /^https?:\/\/(www\.)?instagram\.com\//i.test(url),
  whatsapp: url => /^https?:\/\/(wa\.me\/[0-9]+|api\.whatsapp\.com\/send\?phone=[0-9]+)/i.test(url),
  twitter: url => /^https?:\/\/(www\.)?(twitter\.com|x\.com)\//i.test(url),
  snapchat: url => /^https?:\/\/(www\.)?snapchat\.com\//i.test(url),
  pinterest: url => /^https?:\/\/(www\.)?pinterest\.[a-z.]+\//i.test(url),
  linkedin: url => /^https?:\/\/(www\.)?linkedin\.com\//i.test(url),
  telegram: url => /^https?:\/\/(t\.me|telegram\.me)\/[a-zA-Z0-9_]{5,}/i.test(url),
  imo: url => /^https?:\/\/(www\.)?imo\.im\//i.test(url),
  messenger: url => /^https?:\/\/m\.me\/[a-zA-Z0-9._-]+/i.test(url),
  reddit: url => /^https?:\/\/(www\.)?reddit\.com\//i.test(url),
  skype: url => /^skype:[a-zA-Z0-9._-]+(\?call|\?chat)?$/i.test(url) || /^https?:\/\/join\.skype\.com\//i.test(url)
};
function generateQR() {
  const type = document.getElementById('qr-type').value;
  let url = document.getElementById('qr-input').value.trim();
  const qrDiv = document.getElementById('qr-result');
  const downloadsDiv = document.getElementById('qr-downloads');
  const qrError = document.getElementById('qr-error');
  qrError.innerHTML = '';
  qrDiv.innerHTML = '';
  downloadsDiv.innerHTML = '';
  if(!url) { qrError.innerHTML = "অনুগ্রহ করে URL অথবা টেক্সট দিন।"; return; }

  if(type === 'gmail' && !url.startsWith('mailto:') && url.includes('@')) {
      url = 'mailto:' + url;
  } else if (type === 'whatsapp' && /^[0-9]+$/.test(url)) {
      url = 'https://wa.me/' + url.replace(/[^0-9]/g, '');
  } else if (type === 'telegram' && !url.startsWith('https://t.me/') && !url.startsWith('https://telegram.me/')) {
      url = 'https://t.me/' + url.replace(/^@/, '');
  }

  if(qrValidators[type] && !qrValidators[type](url)) {
    qrError.innerHTML = "আপনি সঠিক "+type.charAt(0).toUpperCase()+type.slice(1)+" লিঙ্ক দেননি! অনুগ্রহ করে সঠিক ফর্ম্যাটে দিন।";
    return;
  }
  qrDiv.innerHTML = '<div class="loader"></div>';
  const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(url)}&ecc=H&format=png&margin=10&color=004d40&bgcolor=f8f5f2`;
  const logoUrl = qrLogos[type];
  
  setTimeout(()=>{
    const finalCanvas = document.createElement('canvas');
    finalCanvas.width = 250;
    finalCanvas.height = 250;
    const ctx = finalCanvas.getContext('2d');

    const qrImg = new window.Image();
    qrImg.crossOrigin = "Anonymous";
    qrImg.onload = function() {
      ctx.clearRect(0,0,250,250);
      ctx.drawImage(qrImg,0,0,250,250);
      
      if(logoUrl){
        const logoImg = new window.Image();
        logoImg.crossOrigin = "Anonymous";
        logoImg.onload = function() {
          const logoSize = 50;
          const x = (250 - logoSize) / 2;
          const y = (250 - logoSize) / 2;
          
          ctx.fillStyle = 'rgba(255,255,255,0.85)';
          ctx.beginPath();
          ctx.arc(125, 125, logoSize / 2 + 5, 0, 2 * Math.PI);
          ctx.fill();
          
          ctx.drawImage(logoImg, x, y, logoSize, logoSize);
          
          qrDiv.innerHTML = '';
          qrDiv.appendChild(finalCanvas);
          downloadsDiv.innerHTML = `<a href="${finalCanvas.toDataURL('image/png')}" download="qr-code-${type}.png" class="download-btn">ডাউনলোড PNG</a>`;
        };
        logoImg.onerror = function() {
          qrDiv.innerHTML = '';
          qrDiv.appendChild(finalCanvas);
          downloadsDiv.innerHTML = `<a href="${finalCanvas.toDataURL('image/png')}" download="qr-code-${type}.png" class="download-btn">ডাউনলোড PNG</a>`;
        };
        logoImg.src = logoUrl;
      } else {
        qrDiv.innerHTML = '';
        qrDiv.appendChild(finalCanvas);
        downloadsDiv.innerHTML = `<a href="${finalCanvas.toDataURL('image/png')}" download="qr-code-${type}.png" class="download-btn">ডাউনলোড PNG</a>`;
      }
    };
    qrImg.onerror = function() {
        qrDiv.innerHTML = '';
        qrError.innerHTML = 'QR কোড তৈরি করতে সমস্যা হচ্ছে। অনুগ্রহ করে আবার চেষ্টা করুন।';
    }
    qrImg.src = qrApiUrl;
  }, 500);
}

// Barcode Tool
function generateBarcode() {
  const val = document.getElementById('barcode-input').value.trim();
  const resultDiv = document.getElementById('barcode-result');
  const downloadsDiv = document.getElementById('barcode-downloads');
  resultDiv.innerHTML = '';
  downloadsDiv.innerHTML = '';
  if(!val) { 
    resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">বারকোডের জন্য টেক্সট/নাম্বার দিন</p>';
    return;
  }
  resultDiv.innerHTML = '<div class="loader"></div>';
  
  let barcodeType = 'CODE128';
  if (/^\d{12,13}$/.test(val)) {
      barcodeType = 'EAN13';
  } else if (/^\d{7,8}$/.test(val)) {
      barcodeType = 'EAN8';
  } else if (/^\d{11,12}$/.test(val)) {
      barcodeType = 'UPCA';
  }

  setTimeout(()=>{
    const imgUrl = `https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(val)}&code=${barcodeType}&translate-esc=true&dpi=120&imagetype=Png&rotation=0&color=004d40&bgcolor=f8f5f2&fontcolor=004d40&height=80&barheight=60&quietzone=10`;
    const imgEl = document.createElement('img');
    imgEl.src = imgUrl;
    imgEl.alt = `${barcodeType} Barcode for ${val}`;
    imgEl.className = 'rounded-image';
    imgEl.onload = () => {
        resultDiv.innerHTML = '';
        resultDiv.appendChild(imgEl);
        downloadsDiv.innerHTML = `<a href="${imgUrl}" download="barcode-${barcodeType}.png" class="download-btn">ডাউনলোড PNG</a>`;
    };
    imgEl.onerror = () => {
        resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">বারকোড তৈরি করা যায়নি। অনুগ্রহ করে সঠিক ডেটা দিন অথবা অন্য বারকোড টাইপ ব্যবহার করুন।</p>';
    }
  }, 500);
}

// Image Resizer
function resizeImage() {
  const fileInput = document.getElementById('resize-upload');
  const widthInput = document.getElementById('resize-width');
  const heightInput = document.getElementById('resize-height');
  const width = parseInt(widthInput.value);
  const height = parseInt(heightInput.value);
  const resultDiv = document.getElementById('resize-result');
  const downloadsDiv = document.getElementById('resize-downloads');
  resultDiv.innerHTML = '';
  downloadsDiv.innerHTML = '';

  if(fileInput.files.length === 0) { resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ছবি আপলোড করুন</p>'; return;}
  if(!width || width <= 0 || !height || height <= 0) { resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">সঠিক নতুন Width ও Height দিন</p>'; return;}
  
  const file = fileInput.files[0];
  if (!file.type.startsWith('image/')){
    resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">অনুগ্রহ করে একটি ছবি ফাইল আপলোড করুন (JPG, PNG, ইত্যাদি)।</p>';
    return;
  }

  resultDiv.innerHTML = '<div class="loader"></div>';
  const reader = new FileReader();
  reader.onload = function(e) {
    const img = new Image();
    img.onload = function() {
      const canvas = document.createElement('canvas');
      canvas.width = width; canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img,0,0,width,height);
      const dataUrl = canvas.toDataURL(file.type);
      resultDiv.innerHTML = `<img src="${dataUrl}" class="rounded-image" alt="Resized Image" />`;
      downloadsDiv.innerHTML = `<a href="${dataUrl}" download="resized-image.${file.name.split('.').pop()}" class="download-btn">ডাউনলোড</a>`;
    };
    img.onerror = function() {
        resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ছবিটি লোড করা যায়নি।</p>';
    }
    img.src = e.target.result;
  };
  reader.onerror = function() {
    resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ফাইলটি পড়া যায়নি।</p>';
  }
  reader.readAsDataURL(file);
}

// Video Converter
function convertVideo() {
  const fileInput = document.getElementById('video-upload');
  const format = document.getElementById('video-format').value;
  const resultDiv = document.getElementById('video-result');
  const downloadsDiv = document.getElementById('video-downloads');
  resultDiv.innerHTML = '';
  downloadsDiv.innerHTML = '';

  if(fileInput.files.length === 0) { resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ভিডিও আপলোড করুন</p>'; return;}
  const file = fileInput.files[0];
  if (!file.type.startsWith('video/')) {
    resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">অনুগ্রহ করে একটি ভিডিও ফাইল আপলোড করুন।</p>';
    return;
  }
  resultDiv.innerHTML = '<div class="loader"></div>';
  setTimeout(()=>{
    try {
        const reader = new FileReader();
        reader.onload = function(e) {
          const blob = new Blob([e.target.result], {type:`video/${format}`});
          const url = URL.createObjectURL(blob);
          resultDiv.innerHTML = `<video src="${url}" controls style="max-width:100%;border-radius:var(--border-radius-small);"></video>`;
          downloadsDiv.innerHTML = `<a href="${url}" download="converted-video.${format}" class="download-btn">ডাউনলোড (${format.toUpperCase()})</a>`;
        };
        reader.onerror = () => {
             resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ভিডিও ফাইল পড়তে সমস্যা হয়েছে।</p>';
        }
        reader.readAsArrayBuffer(file);
    } catch (error) {
        resultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">ভিডিও কনভার্ট করতে সমস্যা হয়েছে।</p>';
        console.error("Video conversion error:", error);
    }
  }, 1200);
}

// Voice Tool:
const popularVoices = [
  {name: "Google US English", gender: "male", lang: "en-US"}, 
  {name: "Google UK English Female", gender: "female", lang: "en-GB"}, 
  {name: "Google हिन्दी", gender: "female", lang: "hi-IN"},
  {name: "Bengali Female", gender: "female", lang: "bn-IN"}, 
  {name: "Bengali Male", gender: "male", lang: "bn-IN"}, 
  {name: "Hindi Female", gender: "female", lang: "hi-IN"}, 
  {name: "Hindi Male", gender: "male", lang: "hi-IN"}
];

function fillVoices() {
  const voiceSelect = document.getElementById('voice-select');
  if (!voiceSelect) return;
  voiceSelect.innerHTML = "";
  let voices = [];
  try {
    voices = speechSynthesis.getVoices();
  } catch(e) {
    console.error("Error getting voices:", e);
    voiceSelect.innerHTML = "<option value=''>ভয়েস লোড করা যায়নি</option>";
    return;
  }
  
  const addedVoices = new Set();

  // Add popular voices if available
  popularVoices.forEach(pv => {
    const foundVoice = voices.find(v => v.name === pv.name && v.lang === pv.lang);
    if (foundVoice && !addedVoices.has(foundVoice.name)) {
      const opt = document.createElement('option');
      opt.value = foundVoice.name;
      opt.textContent = `${foundVoice.name} (${foundVoice.lang.split('-')[0].toUpperCase()}) - ${pv.gender === 'female' ? 'মহিলা' : 'পুরুষ'}`;
      voiceSelect.appendChild(opt);
      addedVoices.add(foundVoice.name);
    }
  });
  
  // Add any other available voices from the system
  const preferredLangs = ['bn-IN', 'bn-BD', 'bn', 'hi-IN', 'hi'];
  preferredLangs.forEach(langPrefix => {
      voices.filter(v => v.lang.startsWith(langPrefix) && !addedVoices.has(v.name)).forEach(v => {
          const opt = document.createElement('option');
          opt.value = v.name;
          opt.textContent = `${v.name} (${v.lang.split('-')[0].toUpperCase()})`;
          if (v.name.toLowerCase().includes('female') || v.name.toLowerCase().includes('মহিলা')) {
            opt.textContent += ' - মহিলা';
          } else if (v.name.toLowerCase().includes('male') || v.name.toLowerCase().includes('পুরুষ')) {
            opt.textContent += ' - পুরুষ';
          }
          voiceSelect.appendChild(opt);
          addedVoices.add(v.name);
      });
  });

  // Add remaining voices
  voices.forEach(v => {
    if (!addedVoices.has(v.name)) {
      const opt = document.createElement('option');
      opt.value = v.name;
      opt.textContent = `${v.name} (${v.lang.split('-')[0].toUpperCase()})`;
      if (v.name.toLowerCase().includes('female') || v.name.toLowerCase().includes('মহিলা')) {
        opt.textContent += ' - মহিলা';
      } else if (v.name.toLowerCase().includes('male') || v.name.toLowerCase().includes('পুরুষ')) {
        opt.textContent += ' - পুরুষ';
      }
      voiceSelect.appendChild(opt);
      addedVoices.add(v.name);
    }
  });

  if (voiceSelect.options.length === 0) {
      voiceSelect.innerHTML = "<option value=''>কোনো ভয়েস পাওয়া যায়নি</option>";
  }
}

if ('speechSynthesis' in window) {
  if (speechSynthesis.getVoices().length === 0) {
    speechSynthesis.onvoiceschanged = fillVoices;
  } else {
    fillVoices();
  }
} else {
    const voiceSelect = document.getElementById('voice-select');
    if(voiceSelect) voiceSelect.innerHTML = "<option value=''>স্পিচ সিন্থেসিস সমর্থিত নয়</option>";
}

let voiceBlobUrl = null; 
let currentUtterance = null; 

function generateVoice() {
  const text = document.getElementById('voice-text').value.trim();
  const audioElem = document.getElementById('voice-audio');
  const playBtn = document.getElementById('play-voice');
  const downloadBtn = document.getElementById('download-voice');
  const voiceSelect = document.getElementById('voice-select');
  const voiceResultDiv = playBtn.parentElement; 

  // Clear previous results and show loader
  if(voiceResultDiv) voiceResultDiv.innerHTML = '<div class="loader"></div>';
  if(voiceResultDiv) {
    voiceResultDiv.appendChild(playBtn);
    voiceResultDiv.appendChild(downloadBtn);
    voiceResultDiv.appendChild(audioElem);
  }
  playBtn.style.display = "none"; 
  downloadBtn.style.display = "none";
  audioElem.style.display = "none";

  if(!text) { 
      if(voiceResultDiv) voiceResultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">অনুগ্রহ করে ভয়েসের জন্য টেক্সট লিখুন।</p>';
      return;
  }
  if (!('speechSynthesis' in window) || !('MediaRecorder' in window)) {
    if(voiceResultDiv) voiceResultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">আপনার ব্রাউজার ভয়েস ডাউনলোড সাপোর্ট করে না।</p>';
    return;
  }

  if (speechSynthesis.speaking) {
    speechSynthesis.cancel();
  }
  if (currentUtterance) {
    currentUtterance.onend = null; 
    currentUtterance.onerror = null;
    currentUtterance.onstart = null;
  }

  currentUtterance = new SpeechSynthesisUtterance(text);
  const voices = speechSynthesis.getVoices();
  const selName = voiceSelect.value;
  currentUtterance.voice = voices.find(v=>v.name===selName) || voices.find(v => v.lang.startsWith('bn')) || voices[0];
  
  if (!currentUtterance.voice && voices.length > 0) {
      currentUtterance.voice = voices.find(v => v.lang.startsWith('bn-IN')) || voices.find(v => v.lang.startsWith('bn')) || voices[0];
  }

  let audioCtx;
  try {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  } catch (e) {
    console.error("Error creating AudioContext:", e);
    if(voiceResultDiv) voiceResultDiv.innerHTML = '<p style="color:#e53935;font-weight:700;">AudioContext তৈরি করা যায়নি।</p>';
    return;
  }

  const dest = audioCtx.createMediaStreamDestination();
  const mediaRecorder = new MediaRecorder(dest.stream, { mimeType: 'audio/webm' });
  let audioChunks = [];
  
  mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
  mediaRecorder.onstop = () => {
    const audioBlob = new Blob(audioChunks, {type: 'audio/webm'});
    if (voiceBlobUrl) URL.revokeObjectURL(voiceBlobUrl); 
    voiceBlobUrl = URL.createObjectURL(audioBlob);
    
    if(voiceResultDiv) voiceResultDiv.innerHTML = '';
    if(voiceResultDiv) {
        voiceResultDiv.appendChild(playBtn);
        voiceResultDiv.appendChild(downloadBtn);
        voiceResultDiv.appendChild(audioElem);
    }

    playBtn.style.display = "inline-block";
    downloadBtn.style.display = "inline-block";
    audioElem.src = voiceBlobUrl;
    audioElem.style.display = "none"; 
    downloadBtn.href = voiceBlobUrl;
    downloadBtn.download = `voice-${(selName || 'generated').replace(/\s/g, '_')}.webm`;
    if (audioCtx && audioCtx.state !== 'closed') audioCtx.close().catch(e => console.warn("AudioContext close error:", e));
  };
  
  currentUtterance.onstart = () => {
    if(mediaRecorder.state === "inactive") mediaRecorder.start();
  };
  currentUtterance.onend = () => {
    setTimeout(()=>{ 
        if (mediaRecorder.state === "recording") {
            mediaRecorder.stop(); 
        }
    }, 250);
  };
  currentUtterance.onerror = (event) => {
    console.error('SpeechSynthesisUtterance.onerror', event);
    if(voiceResultDiv) voiceResultDiv.innerHTML = `<p style="color:#e53935;font-weight:700;">ভয়েস তৈরি করতে সমস্যা হয়েছে: ${event.error}</p>`;
    if (mediaRecorder.state === "recording") mediaRecorder.stop();
    if (audioCtx && audioCtx.state !== 'closed') audioCtx.close().catch(e => console.warn("AudioContext close error:", e));
  };

  // Start recording before speaking
  mediaRecorder.start();
  
  // Speak the text
  speechSynthesis.speak(currentUtterance);
}

document.getElementById('play-voice').onclick = function(){
  const audioElem = document.getElementById('voice-audio');
  if(voiceBlobUrl){
    audioElem.src = voiceBlobUrl; 
    audioElem.currentTime = 0; 
    audioElem.play().catch(e => console.error("Error playing audio:", e));
  }
};

// Add event listener to close drawer on clicking outside on mobile
document.addEventListener('click', function(event) {
  const drawer = document.getElementById('drawer');
  const drawerToggle = document.getElementById('drawerToggle');
  if (!drawer || !drawerToggle) return;

  const isClickInsideDrawer = drawer.contains(event.target);
  const isDrawerOpen = drawerToggle.checked;
  let isToggleButton = event.target === drawerToggle || 
                        (event.target.matches && event.target.matches('label[for="drawerToggle"]')) ||
                        (event.target.parentElement && event.target.parentElement.matches && event.target.parentElement.matches('label[for="drawerToggle"]'));

  if (isDrawerOpen && !isClickInsideDrawer && !isToggleButton && window.innerWidth <= 700) {
    let targetElement = event.target;
    let isDrawerMenuItem = false;
    while(targetElement && targetElement !== document.body) {
        if(targetElement.matches && targetElement.matches('#toolList button')) {
            isDrawerMenuItem = true;
            break;
        }
        targetElement = targetElement.parentElement;
    }
    if(!isDrawerMenuItem) {
        drawerToggle.checked = false;
    }
  }
});
</script>
</body>
</html>
